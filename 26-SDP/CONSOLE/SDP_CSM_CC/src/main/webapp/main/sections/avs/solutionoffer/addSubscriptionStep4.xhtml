<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui">


<h:form id="mainForm">
	<p:outputPanel>
	<h:outputText value="#{msgs['solutionOffer.add.step4']}" styleClass="pageTitle"/>
		<center>
			<h:panelGrid columns="1" styleClass="GenericFormPanelClass">
				<h:panelGroup>
					<center>

						<h:panelGrid columns="4" styleClass="alignLeftClass">
								<h:outputText value="#{msgs['solutionOffer.addSolutionOffer.rcFrequency']}" />
							<p:selectOneMenu value="#{solutionOfferMananger.selectedBean.rcFrequencyTypeId}"  >
								<f:selectItems value="#{solutionOfferMananger.business.frequencyList}" />
								<p:ajax event="valueChange" update="OfferSelectedList" />
							</p:selectOneMenu>
						</h:panelGrid>

						<p:spacer height="10px" />

						<p:dataTable id="OfferSelectedList" var="item" value="#{solutionOfferMananger.selectedBean.offerDetailList}" rowKey="#{item.offerName}" paginator="true"
							paginatorTemplate="#{msgs['paginator.paginatorTemplate']}" rows="5" pageLinks="3" paginatorPosition="bottom">

							<p:column>
								<f:facet name="header">
									<h:outputText value="#{msgs['solutionOffer.addSolutionOffer.offerName']}" />
								</f:facet>
								<h:outputText styleClass="offerNameStepClass" value="#{item.offerName}" title="#{item.offerName}" />
							</p:column>
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{msgs['solutionOffer.addSolutionOffer.nrc']}" />
								</f:facet>
								<p:selectOneMenu value="#{item.nrcPriceCatalogId}" partialSubmit="true" immediate="true" style="width:90px;">
									<f:selectItems value="#{solutionOfferMananger.business.priceList}" />
								</p:selectOneMenu>
							</p:column>
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{msgs['solutionOffer.addSolutionOffer.rcPrice']}" />
								</f:facet>
								<p:selectOneMenu value="#{item.rcPriceCatalogId}" partialSubmit="true" immediate="true" style="width:90px;" disabled="${solutionOfferMananger.selectedBean.rcFrequencyTypeId ==1}">
									<f:selectItems value="#{solutionOfferMananger.business.priceList}" />
								</p:selectOneMenu>
							</p:column>
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{msgs['solutionOffer.addSolutionOffer.currency']}" />
								</f:facet>
								<p:selectOneMenu value="#{item.currencyTypeId}" style="width:90px;" disabled="true">
									<f:selectItems value="#{solutionOfferMananger.business.currencyList}" />
								</p:selectOneMenu>
							</p:column>
							<!-- 
							
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{msgs['solutionOffer.addSolutionOffer.rcFrequency']}" />
								</f:facet>
								<p:selectOneMenu value="#{item.rcFrequencyTypeId}" valueChangeListener="#{item.selectFrequencyChangeListener}" partialSubmit="true" immediate="true">
									<f:selectItems value="#{solutionOfferMananger.business.frequencyList}" />
								</p:selectOneMenu>
							</p:column>
							
							<p:column>
								<f:facet name="header">
									<h:outputText value="#{msgs['solutionOffer.addSolutionOffer.days']}" />
								</f:facet>
								<h:outputText value="#{item.frequencyDays}" />
							</p:column>
							 -->
						</p:dataTable>

						<h:panelGrid columns="2">
							<p:commandButton styleClass="darkButtonSyle" value="#{msgs['button.backLabel']}" actionListener="#{solutionOfferMananger.backtoAddSubscriptionStep3}" update=":appContent" />
							<p:commandButton styleClass="actionButton" value="#{msgs['button.insertLabel']}" actionListener="#{solutionOfferMananger.addSubscription}"
								oncomplete="handlePopupVisibility(xhr, status, args)" update=":appContent :userDetailsDiv" />

						</h:panelGrid>
					</center>
				</h:panelGroup>

			</h:panelGrid>
		</center>
	</p:outputPanel>

</h:form>
</html>

